### 用户统一路由API测试 ###
@baseUrl = http://localhost:3000/api/v1
@authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJhYjE5ZjBiNC02OGJhLTQ2YmItOTFlYi0wZTNlM2I0MWY2YmIiLCJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6InVzZXIiLCJpYXQiOjE3NDY1NDQxMTYsImV4cCI6MTc0NjYzMDUxNn0.-XFVixC7PHgDhDpNswi8SKj0rZKOG-PklBi3RSg6H6c

## 一、认证相关接口 ##

### 1.1 用户登录
POST {{baseUrl}}/user/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin1"
}

### 1.2 用户注册
POST {{baseUrl}}/user/auth/register
Content-Type: application/json

{
  "username": "admin",
  "email": "admin@example.com",
  "password": "admin1"
}

### 1.3 获取当前用户基本信息
GET {{baseUrl}}/user/me
Authorization: Bearer {{authToken}}

## 二、用户资料管理 ##

### 2.1 获取用户完整资料(包含会员信息、功能设置、使用情况)
GET {{baseUrl}}/user/profile
Authorization: Bearer {{authToken}}

### 2.2 更新用户基本资料
PUT {{baseUrl}}/user/profile
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "displayName": "测试用户",
  "avatar": "https://example.com/avatar.jpg"
}

## 三、用户设置管理 ##

### 3.1 更新用户功能设置
PUT {{baseUrl}}/user/settings
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "defaultSourceLanguage": "zh_cn",
  "defaultTargetLanguage": "en_us",
  "autoTranslate": true,
  "autoSpeak": false,
  "speechRate": 1,
  "theme": "dark"
}

### 3.2 切换翻译功能开关(开启/关闭)
PUT {{baseUrl}}/user/settings/translation
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "enabled": true
}

## 四、响应示例 ##

### 4.1 获取用户完整资料响应示例
# GET /user/profile 成功响应
{
  "code": 0,
  "message": "获取用户资料成功",
  "data": {
    "user_id": "ab19f0b4-68ba-46bb-91eb-0e3e3b41f6bb",
    "username": "admin",
    "displayName": "管理员",
    "email": "admin@example.com",
    "avatar": "https://example.com/avatar.jpg",
    "role": "user",
    "createdAt": "2024-05-06T14:30:16.000Z",
    "lastLoginAt": "2024-05-06T14:30:16.000Z",
    
    "membership": {
      "level": "premium",
      "next_reset_time": "2024-06-06T14:30:16.000Z",
      "total_minutes": 10000,
      "used_minutes": 24,
      "remaining_minutes": 9976
    },
    
    "features": {
      "translationEnabled": true
    },
    
    "usage": {
      "transcribeMinutesUsed": 18,
      "translateMinutesUsed": 6,
      "translationCount": 15
    },
    
    "settings": {
      "defaultSourceLanguage": "zh_cn",
      "defaultTargetLanguage": "en_us",
      "autoTranslate": true,
      "autoSpeak": false,
      "speechRate": 1,
      "theme": "dark",
      "translationEnabled": true
    },
    
    "recent_translations": [
      {
        "id": "12345",
        "title": "会议记录",
        "createdAt": "2024-05-06T12:30:16.000Z",
        "status": "success",
        "sourceLanguage": "zh_cn",
        "targetLanguage": "en_us",
        "duration": 3.5
      }
    ]
  }
}