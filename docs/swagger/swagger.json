{
  "openapi": "3.0.0",
  "info": {
    "title": "Focus Backend API",
    "version": "1.0.0",
    "description": "语音识别及翻译后端服务 API 文档"
  },
  "tags": [
    {
      "name": "通义听悟",
      "description": "音频识别与转录相关API"
    },
    {
      "name": "翻译管理",
      "description": "翻译记录管理相关API"
    },
    {
      "name": "OpenAI API",
      "description": "OpenAI/OpenRouter 集成相关API"
    }
  ],
  "paths": {
    "/tingwu/upload": {
      "post": {
        "summary": "上传音频文件",
        "description": "上传音频文件并返回文件的URL，用于后续转录",
        "tags": [
          "通义听悟"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "audio": {
                    "type": "string",
                    "format": "binary",
                    "description": "音频文件（MP3、WAV等格式）"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "文件上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少文件"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/tasks": {
      "post": {
        "summary": "创建转录任务",
        "description": "创建音频转录任务，支持离线转录",
        "tags": [
          "通义听悟"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TranscriptionTask"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "转录任务创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskCreationResponse"
                }
              }
            }
          },
          "400": {
            "description": "无效的请求参数"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/tasks/{taskId}": {
      "get": {
        "summary": "获取任务状态和结果",
        "description": "根据任务ID获取转录任务的状态和结果",
        "tags": [
          "通义听悟"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "taskId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "转录任务ID"
          }
        ],
        "responses": {
          "200": {
            "description": "成功获取任务信息",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskStatusResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少taskId"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/tasks/{taskId}/poll": {
      "get": {
        "summary": "轮询任务结果直到完成",
        "description": "持续轮询任务状态直到任务完成或失败",
        "tags": [
          "通义听悟"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "taskId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "转录任务ID"
          },
          {
            "in": "query",
            "name": "maxAttempts",
            "schema": {
              "type": "integer",
              "default": 30
            },
            "description": "最大轮询次数"
          },
          {
            "in": "query",
            "name": "interval",
            "schema": {
              "type": "integer",
              "default": 3000
            },
            "description": "轮询间隔(毫秒)"
          }
        ],
        "responses": {
          "200": {
            "description": "转录任务完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "转录任务完成"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "taskId": {
                          "type": "string"
                        },
                        "taskStatus": {
                          "type": "string"
                        },
                        "transcription": {
                          "type": "string",
                          "description": "转录结果URL"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少taskId"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/fetch-json": {
      "post": {
        "summary": "获取JSON文件内容",
        "description": "从指定URL获取JSON文件内容",
        "tags": [
          "通义听悟"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "url"
                ],
                "properties": {
                  "url": {
                    "type": "string",
                    "description": "JSON文件的URL"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功获取JSON文件内容",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少URL"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/vocabularies": {
      "post": {
        "summary": "创建热词表",
        "description": "创建用于语音识别的热词表",
        "tags": [
          "通义听悟"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "words"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "热词表名称"
                  },
                  "words": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "热词列表"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "热词表创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少必要参数"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/realtime/start": {
      "post": {
        "summary": "创建实时翻译任务",
        "description": "创建一个实时语音识别和翻译任务，支持多种转录和翻译参数配置",
        "tags": [
          "通义听悟"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RealtimeTaskRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "实时翻译任务创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "无效的请求参数"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/realtime/{taskId}/stop": {
      "post": {
        "summary": "停止实时翻译任务",
        "description": "停止指定的实时语音翻译任务",
        "tags": [
          "通义听悟"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "taskId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "实时翻译任务ID"
          }
        ],
        "responses": {
          "200": {
            "description": "实时翻译任务停止成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少taskId"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/realtime/websocket": {
      "get": {
        "summary": "获取WebSocket连接信息",
        "description": "返回建立实时翻译WebSocket连接所需的相关信息",
        "tags": [
          "通义听悟"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "taskId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "实时翻译任务ID"
          }
        ],
        "responses": {
          "200": {
            "description": "获取连接信息成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "获取WebSocket连接信息成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "websocketUrl": {
                          "type": "string",
                          "description": "WebSocket连接地址"
                        },
                        "taskId": {
                          "type": "string"
                        },
                        "accessToken": {
                          "type": "string",
                          "description": "建立连接所需的令牌"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少taskId"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/tingwu/realtime/{taskId}/result": {
      "get": {
        "summary": "获取实时翻译任务结果",
        "description": "获取实时翻译任务的摘要和结果信息",
        "tags": [
          "通义听悟"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "taskId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "实时翻译任务ID"
          }
        ],
        "responses": {
          "200": {
            "description": "获取任务结果成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "获取任务结果成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "processing",
                            "completed",
                            "failed"
                          ]
                        },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "paragraphs": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "conversations": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "questionsAnswering": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "question": {
                                    "type": "string"
                                  },
                                  "answer": {
                                    "type": "string"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求无效，可能是缺少taskId"
          },
          "404": {
            "description": "未找到指定任务"
          },
          "500": {
            "description": "服务器错误"
          }
        }
      }
    },
    "/api/v1/translation/save": {
      "post": {
        "tags": [
          "翻译管理"
        ],
        "summary": "保存翻译记录",
        "description": "保存新的翻译记录到系统",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SaveTranslationParams"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "保存成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "翻译记录保存成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/TranslationDetailResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "保存翻译记录失败：必要参数缺失"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "未授权或登录已过期"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "保存翻译记录失败：服务器错误"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/translation/list": {
      "get": {
        "tags": [
          "翻译管理"
        ],
        "summary": "获取翻译记录列表",
        "description": "分页获取当前用户的翻译记录列表",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页条数",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "获取翻译记录列表成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/TranslationListResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "未授权或登录已过期"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "获取翻译记录列表失败：服务器错误"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/translation/detail/{id}": {
      "get": {
        "tags": [
          "翻译管理"
        ],
        "summary": "获取翻译记录详情",
        "description": "根据ID获取特定翻译记录的详细信息",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "翻译记录ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "获取翻译记录详情成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/TranslationDetailResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "记录ID不能为空"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "未授权或登录已过期"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "禁止访问",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "无权访问此翻译记录"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "记录不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "翻译记录不存在"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "获取翻译记录详情失败：服务器错误"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/translation/delete/{id}": {
      "delete": {
        "tags": [
          "翻译管理"
        ],
        "summary": "删除翻译记录",
        "description": "根据ID删除特定的翻译记录",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "翻译记录ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "翻译记录删除成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/OperationResult"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "记录ID不能为空"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "未授权或登录已过期"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "禁止操作",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "无权删除此翻译记录"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "记录不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "翻译记录不存在"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "删除翻译记录失败：服务器错误"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/openai/chat": {
      "post": {
        "tags": [
          "OpenAI API"
        ],
        "summary": "创建聊天完成",
        "description": "使用OpenAI/OpenRouter API创建聊天完成（多轮对话）",
        "operationId": "createChatCompletion",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatCompletionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI聊天响应生成成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AICompletionResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/openai/completion": {
      "post": {
        "tags": [
          "OpenAI API"
        ],
        "summary": "创建文本完成",
        "description": "使用OpenAI/OpenRouter API创建文本完成（单轮对话）",
        "operationId": "createCompletion",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompletionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI文本响应生成成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AICompletionResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/openai/config": {
      "get": {
        "tags": [
          "OpenAI API"
        ],
        "summary": "获取OpenAI配置",
        "description": "获取OpenAI/OpenRouter服务配置信息",
        "operationId": "getOpenAIConfig",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "OpenAI配置获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenAIConfigResponse"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "服务器错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "TranscriptionTask": {
        "type": "object",
        "required": [
          "type",
          "input"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "offline"
            ],
            "description": "转录任务类型，目前支持离线转录"
          },
          "input": {
            "type": "object",
            "properties": {
              "sourceLanguage": {
                "type": "string",
                "enum": [
                  "cn",
                  "en"
                ],
                "description": "音频源语言，cn为中文，en为英文"
              },
              "fileUrl": {
                "type": "string",
                "description": "音频文件URL"
              }
            }
          },
          "parameters": {
            "type": "object",
            "properties": {
              "transcription": {
                "type": "object",
                "properties": {
                  "diarizationEnabled": {
                    "type": "boolean",
                    "description": "是否启用说话人分离"
                  },
                  "diarization": {
                    "type": "object",
                    "properties": {
                      "speakerCount": {
                        "type": "integer",
                        "description": "说话人数量"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "操作成功"
          },
          "data": {
            "type": "object"
          }
        }
      },
      "FileUploadResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "文件上传成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "fileName": {
                "type": "string"
              },
              "fileUrl": {
                "type": "string"
              },
              "size": {
                "type": "number"
              }
            }
          }
        }
      },
      "TaskCreationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "创建转录任务成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "taskId": {
                "type": "string"
              },
              "status": {
                "type": "string"
              }
            }
          }
        }
      },
      "TaskStatusResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "获取任务信息成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "taskId": {
                "type": "string"
              },
              "taskStatus": {
                "type": "string",
                "enum": [
                  "ONGOING",
                  "COMPLETED",
                  "FAILED"
                ]
              },
              "result": {
                "type": "object",
                "properties": {
                  "transcription": {
                    "type": "string",
                    "description": "转录结果URL"
                  }
                }
              }
            }
          }
        }
      },
      "RealtimeTaskRequest": {
        "type": "object",
        "required": [
          "sourceLanguage",
          "format",
          "sampleRate"
        ],
        "properties": {
          "sourceLanguage": {
            "type": "string",
            "enum": [
              "cn",
              "en",
              "multilingual",
              "yue",
              "ja",
              "ko"
            ],
            "description": "音频源语言，cn为中文，en为英文，multilingual为多语种"
          },
          "languageHints": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "指定多语言模型时需语音识别出文字的语种列表，仅当sourceLanguage为multilingual时有效"
          },
          "format": {
            "type": "string",
            "enum": [
              "pcm",
              "opus",
              "aac",
              "speex",
              "mp3"
            ],
            "description": "音频流数据的编码格式"
          },
          "sampleRate": {
            "type": "string",
            "enum": [
              "16000",
              "8000"
            ],
            "description": "音频流数据的采样率"
          },
          "translationEnabled": {
            "type": "boolean",
            "default": true,
            "description": "是否启用翻译功能"
          },
          "targetLanguages": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "cn",
                "en",
                "ja",
                "ko",
                "de",
                "fr",
                "ru"
              ]
            },
            "description": "目标翻译语言列表"
          },
          "diarizationEnabled": {
            "type": "boolean",
            "default": false,
            "description": "是否启用说话人分离"
          },
          "speakerCount": {
            "type": "integer",
            "description": "说话人数量，仅当启用说话人分离时有效"
          },
          "transcription": {
            "type": "object",
            "properties": {
              "outputLevel": {
                "type": "integer",
                "enum": [
                  1,
                  2
                ],
                "default": 2,
                "description": "设置语音识别结果返回等级：1-识别出完整句子时返回；2-识别出中间结果及完整句子时返回"
              },
              "phraseId": {
                "type": "string",
                "description": "热词词表ID"
              }
            }
          },
          "translation": {
            "type": "object",
            "properties": {
              "outputLevel": {
                "type": "integer",
                "enum": [
                  1,
                  2
                ],
                "default": 2,
                "description": "设置翻译结果返回等级：1-完整；2-中间结果"
              }
            }
          },
          "autoChaptersEnabled": {
            "type": "boolean",
            "default": false,
            "description": "是否开启章节速览功能"
          },
          "summarizationEnabled": {
            "type": "boolean",
            "default": false,
            "description": "是否开启摘要总结功能"
          },
          "summarization": {
            "type": "object",
            "properties": {
              "types": {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "Paragraph",
                    "Conversational",
                    "QuestionsAnswering",
                    "MindMap"
                  ]
                },
                "description": "摘要类型列表"
              }
            }
          },
          "textPolishEnabled": {
            "type": "boolean",
            "default": false,
            "description": "是否开启口语书面化功能"
          },
          "customPromptEnabled": {
            "type": "boolean",
            "default": false,
            "description": "是否开启自定义prompt功能"
          }
        }
      },
      "SaveTranslationParams": {
        "type": "object",
        "required": [
          "title",
          "sourceLanguage",
          "targetLanguage",
          "originalText",
          "translatedText",
          "duration",
          "timestamp"
        ],
        "properties": {
          "taskId": {
            "type": "string",
            "nullable": true,
            "description": "任务ID（可选）"
          },
          "title": {
            "type": "string",
            "description": "标题"
          },
          "sourceLanguage": {
            "type": "string",
            "description": "源语言"
          },
          "targetLanguage": {
            "type": "string",
            "description": "目标语言"
          },
          "originalText": {
            "type": "string",
            "description": "原文内容"
          },
          "translatedText": {
            "type": "string",
            "description": "翻译内容"
          },
          "duration": {
            "type": "number",
            "description": "录音时长（秒）"
          },
          "timestamp": {
            "type": "number",
            "description": "时间戳"
          },
          "taskStatus": {
            "type": "string",
            "nullable": true,
            "description": "任务状态"
          },
          "outputMp3Path": {
            "type": "string",
            "nullable": true,
            "description": "输出MP3文件路径"
          },
          "errorMessage": {
            "type": "string",
            "nullable": true,
            "description": "错误信息"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "description": "标签（可选）"
          }
        }
      },
      "TranslationDetailResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "记录ID"
          },
          "title": {
            "type": "string",
            "description": "标题"
          },
          "originalText": {
            "type": "string",
            "description": "原文内容"
          },
          "translatedText": {
            "type": "string",
            "description": "翻译内容"
          },
          "sourceLanguage": {
            "type": "string",
            "description": "源语言"
          },
          "targetLanguage": {
            "type": "string",
            "description": "目标语言"
          },
          "taskId": {
            "type": "string",
            "nullable": true,
            "description": "任务ID"
          },
          "status": {
            "type": "string",
            "description": "记录状态",
            "example": "success"
          },
          "duration": {
            "type": "number",
            "description": "录音时长（秒）"
          },
          "timestamp": {
            "type": "number",
            "description": "时间戳"
          },
          "outputMp3Path": {
            "type": "string",
            "nullable": true,
            "description": "输出MP3文件路径"
          },
          "errorMessage": {
            "type": "string",
            "nullable": true,
            "description": "错误信息"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "标签"
          },
          "isFavorite": {
            "type": "boolean",
            "description": "是否收藏"
          },
          "isVoice": {
            "type": "boolean",
            "description": "是否语音翻译"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "TranslationListItemResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "记录ID"
          },
          "title": {
            "type": "string",
            "description": "标题"
          },
          "originalText": {
            "type": "string",
            "description": "原文内容"
          },
          "translatedText": {
            "type": "string",
            "description": "翻译内容"
          },
          "sourceLanguage": {
            "type": "string",
            "description": "源语言"
          },
          "targetLanguage": {
            "type": "string",
            "description": "目标语言"
          },
          "duration": {
            "type": "number",
            "description": "录音时长（秒）"
          },
          "status": {
            "type": "string",
            "description": "记录状态",
            "example": "success"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "timestamp": {
            "type": "number",
            "description": "时间戳"
          },
          "outputMp3Path": {
            "type": "string",
            "nullable": true,
            "description": "输出MP3文件路径"
          },
          "isFavorite": {
            "type": "boolean",
            "description": "是否收藏"
          }
        }
      },
      "TranslationListResponse": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number",
            "description": "总记录数"
          },
          "page": {
            "type": "number",
            "description": "当前页码"
          },
          "pageSize": {
            "type": "number",
            "description": "每页条数"
          },
          "totalPages": {
            "type": "number",
            "description": "总页数"
          },
          "list": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TranslationListItemResponse"
            },
            "description": "翻译记录列表"
          }
        }
      },
      "OperationResult": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "操作是否成功"
          }
        }
      },
      "AICompletionResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "请求是否成功",
            "example": true
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "AI响应生成成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "message": {
                "type": "object",
                "properties": {
                  "role": {
                    "type": "string",
                    "description": "消息角色",
                    "example": "assistant"
                  },
                  "content": {
                    "type": "string",
                    "description": "生成的内容",
                    "example": "你好！我是一个AI助手，我可以回答问题、提供信息、帮助完成各种任务。有什么我可以帮你的吗？"
                  }
                }
              },
              "usage": {
                "type": "object",
                "properties": {
                  "prompt_tokens": {
                    "type": "integer",
                    "description": "提示词的token数量",
                    "example": 10
                  },
                  "completion_tokens": {
                    "type": "integer",
                    "description": "生成内容的token数量",
                    "example": 42
                  },
                  "total_tokens": {
                    "type": "integer",
                    "description": "总共使用的token数量",
                    "example": 52
                  }
                }
              },
              "model": {
                "type": "string",
                "description": "使用的模型",
                "example": "openai/gpt-4o"
              }
            }
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "响应时间戳",
            "example": "2023-08-15T12:34:56.789Z"
          }
        }
      },
      "ChatCompletionRequest": {
        "type": "object",
        "required": [
          "messages"
        ],
        "properties": {
          "model": {
            "type": "string",
            "description": "使用的模型名称",
            "example": "openai/gpt-4o"
          },
          "messages": {
            "type": "array",
            "description": "消息列表",
            "items": {
              "$ref": "#/components/schemas/OpenAIMessage"
            },
            "example": [
              {
                "role": "user",
                "content": "你好，请介绍一下自己"
              }
            ]
          },
          "temperature": {
            "type": "number",
            "description": "生成文本的随机性，0-1之间",
            "minimum": 0,
            "maximum": 1,
            "example": 0.7
          }
        }
      },
      "CompletionRequest": {
        "type": "object",
        "required": [
          "prompt"
        ],
        "properties": {
          "prompt": {
            "type": "string",
            "description": "提示文本",
            "example": "你好，请介绍一下自己"
          },
          "model": {
            "type": "string",
            "description": "使用的模型名称",
            "example": "openai/gpt-4o"
          },
          "temperature": {
            "type": "number",
            "description": "生成文本的随机性，0-1之间",
            "minimum": 0,
            "maximum": 1,
            "example": 0.7
          }
        }
      },
      "OpenAIConfigResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "请求是否成功",
            "example": true
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "OpenAI配置获取成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "isInitialized": {
                "type": "boolean",
                "description": "OpenAI服务是否已初始化",
                "example": true
              },
              "defaultModel": {
                "type": "string",
                "description": "默认使用的模型",
                "example": "openai/gpt-4o"
              },
              "availableModels": {
                "type": "array",
                "description": "可用的模型列表",
                "items": {
                  "type": "string"
                },
                "example": [
                  "openai/gpt-4o",
                  "openai/gpt-4-turbo",
                  "anthropic/claude-3-opus"
                ]
              }
            }
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "响应时间戳",
            "example": "2023-08-15T12:34:56.789Z"
          }
        }
      },
      "OpenAIMessage": {
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "properties": {
          "role": {
            "type": "string",
            "description": "消息角色",
            "enum": [
              "system",
              "user",
              "assistant",
              "function",
              "tool"
            ],
            "example": "user"
          },
          "content": {
            "type": "string",
            "description": "消息内容",
            "example": "你好，请介绍一下自己"
          }
        }
      }
    }
  }
}